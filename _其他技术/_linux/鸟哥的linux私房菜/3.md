# 《鸟哥的 Linux 私房菜》读书笔记(三)

> 关键词: Linux, 读书笔记

## 7 文件与磁盘管理系统

暂时不想看哈哈哈哈  
略

## 8 文件与文件系统的压缩

### 8.2 常见压缩命令

| 命令      |   拓展名   |
| --------- | :--------: |
| compress  |    \*.Z    |
| zip       |   \*.zip   |
| gzip      |  \*.gzip   |
| bzip2     |   \*.bz2   |
| xz        |   \*.xz    |
| tar       |   \*.tar   |
| tar+gzip  | \*.tar.gz  |
| tar+bzip2 | \*.tar.bz2 |
| tar+xz    | \*.tar.xz  |

tar 仅是打包，没有压缩

#### 8.2.1 gzip

解压用[ gzip -d ]  
压缩和解压都会删除原来的文件  
[ egrep ]可以在解压文件之前看一眼文件里的内容

#### 8.2.2 bzip2

同 gzip，压缩比更高

#### 8.2.3 xz

同上

### 8.3 tar

| 参数           | 作用                           |
| -------------- | ------------------------------ |
| -c             | 建立打包文件                   |
| -t             | 查看打包文件里有哪些文件名     |
| -x             | 解压缩                         |
| -z             | 进行 gzip 压缩并打包           |
| -j             | 进行 bzip2 压缩并打包          |
| -J             | 进行 xz 压缩并打包             |
| -v             | 执行过程中显示正在处理的文件名 |
| -f dest src    | 将 src 打包成 dest             |
| -C             | 制定解压缩到的目录             |
| -p             | 保留原本的权限和属性           |
| -P             | 保留绝对路径                   |
| --exclude=FILE | 不将 FILE 打包                 |

常用：

打包：

    tar -jcv -f file.tar.bz2 file

查询：

    tar -jtv -f file.tar.bz2

解压：

    tar -jxv -f file.tar.bz2 -C directory

### 8.4 XFS 文件系统的备份还原

略

### 8.5 刻录光盘

略

### 8.6 其他备份

略

---

### 9 vim

#### 9.2 vi 的使用

三种模式：

- **一般命令模式**：默认模式，vi 打开一个文件就是了，可以[复制，粘贴，删除]
- **编辑模式**：一般模式下按[i,I,o,O,a,A,r,R]之一进入编辑模式，按[Esc]退出
- **命令行模式**：一般模式下，按[:,/,?]之一进入命令行模式，可以查找、读取、保存、批量操作、退出、显示行号，按[Esc]退出

##### 移动光标

| 按键      | 效果             |
| --------- | ---------------- |
| h         | 左               |
| j         | 下               |
| k         | 上               |
| l         | 右               |
| 20j       | 下移 20 行       |
| ctrl+f    | page down        |
| ctrl+b    | page up          |
| ctrl+d    | 向下半页         |
| ctrl+u    | 向上半页         |
| 0         | 到行开头         |
| \$        | 到行末尾         |
| H         | 到这一面的最开头 |
| G         | 文件末尾         |
| 20G       | 到第 20 行       |
| gg        | 到第一行         |
| 20[enter] | 下移 20 行       |

##### 查找与替换

    :1,$s/word1/word2/g[c]

从第一行到最后一行‘查找 word1，替换为 word2，并且询问确认

##### 删除、复制、粘贴

| 按键   | 操作                             |
| ------ | -------------------------------- |
| x,X    | x=del，X=backspace               |
| nx     | 删除 n 个字符                    |
| dd     | 删除一整行                       |
| ndd    | 删除 n 行                        |
| yy     | 复制光标所在一行                 |
| nyy    | 复制 n 行                        |
| p      | 将已经复制的文件在光标下一行粘贴 |
| P      | 在光标上一行粘贴                 |
| J      | 将光标所在行和下一行合并         |
| u      | undo                             |
| ctrl+r | redo                             |
| .      | 重复上一个操作                   |

##### 一般模式切换命令行模式

| 按键      | 操作                                |
| --------- | ----------------------------------- |
| :w        | 保存                                |
| :w!       | 甚至可以保存只读文件/权限够的情况下 |
| :q        | 退出                                |
| :q!       | 退出且不保存                        |
| :wq!      | 强制保存后退出                      |
| ZZ        | 保存后退出/若没修改就直接退出       |
| :w[xxx]   | 另存为 xxx                          |
| :r[xxx]   | 将 xxx 的内容加到文件后面           |
| :set nu   | 显示行号                            |
| :set nonu | 取消显示行号                        |

\*.swp 文件是默认的自动备份，当异常退出/协同工作时需要注意.swp 文件

### 9.3 vim 的额外功能

#### 9.3.1 可视化区块

| 按键   | 操作           |
| ------ | -------------- |
| v      | 选中经过的字符 |
| V      | 选中经过的行   |
| ctrl+v | 选中块块       |

#### 9.3.2 多文件编辑

首先 vim 多个文件（同时打开多个）

| 按键   | 操作           |
| ------ | -------------- |
| :n     | 编辑下一个文件 |
| :N     | 编辑上一个文件 |
| :files | 列出所有文件   |

#### 9.3.3 多窗口

| 按键      | 操作                       |
| --------- | -------------------------- |
| :sp[file] | 打开多窗口[打开另一个文件] |
| ctrl+w+j  | 移到下一个窗口             |
| ctrl+w+k  | 移到上一个窗口             |
| ctrl+w+q  | == :q == :close            |

#### 9.3.4 自动补全

| 按键          | 操作                   |
| ------------- | ---------------------- |
| ctrl+x ctrl+n | 以当前文件的内容来补齐 |
| ctrl+x ctrl+o | 以当内置语法来补齐     |

#### 9.3.5 设置环境

不写就是默认加一句[ :set ]  
基本都可以加 [ no ]

| 按键           | 操作                              |
| -------------- | --------------------------------- |
| nu             | 行号有无                          |
| hlsearch       | 是否将查找的字符串高亮            |
| autoindent     | 是否自动缩进                      |
| backup         | 产生一个叫 xxx~的文件保存原来内容 |
| all            | 显示所有设置                      |
| :set           | 显示非默认的设置                  |
| bg=dark        | 设置背景颜色                      |
| :syntax on/off | 是否高亮                          |

#### 9.3.6 vim 常用总结

![vim](https://s1.ax1x.com/2020/05/12/YNpKbV.jpg)

---
