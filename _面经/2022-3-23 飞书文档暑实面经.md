# 2022-3-23 é£ä¹¦æ–‡æ¡£æš‘å®é¢ç»

## ä¸€é¢

1. **æœ‰æ²¡æœ‰é‡åˆ°è¿‡ Google éƒ½æŸ¥ä¸åˆ°çš„é—®é¢˜**: å†™ç‹¼äººæ€çš„æ—¶å€™åŠ¨æ€æ¸²æŸ“æŒ‰é’®, ä½¿ç”¨ vue3 çš„ `h` å‡½æ•°, æ‰¾ä¸åˆ°ç›¸å…³æ–‡ç« , ç›´åˆ°ç¿»æºç æ‰ææ¸…æ¥š
2. **CPU æœ‰å‡ çº§ç¼“å­˜**: ç­”äº†å¿«è¡¨å’Œæ™®é€šç¼“å­˜
3. **å¦‚ä½•åˆ¤æ–­é“¾è¡¨æœ‰æ²¡æœ‰ç¯**: ä¸€å¼€å§‹è¯´äº†åŒæŒ‡é’ˆçš„åšæ³•, è¿½é—®**å¦‚ä½•ç”¨ç¼“å­˜çš„æ€æƒ³å®ç°**, ç­”: ç”¨ `WeakSet` å­˜é‡åˆ°è¿‡çš„èŠ‚ç‚¹, å¦‚æœå‡ºç°é‡å¤çš„è¯´æ˜æœ‰ç¯

   ```ts
   type ListNode = {
     val: number;
     next: ListNode;
   } | null;

   function hasLoop(node: ListNode): boolean {
     const set = new WeakSet<ListNode>();

     while (node) {
       if (set.has(node)) return true;
       set.add(node);
       node = node.next;
     }

     return false;
   }
   ```

4. **å®ç°æ·±æ‹·è´, è¦å¤„ç†å¾ªç¯å¼•ç”¨, ä½¿ç”¨ä¸Šè¿°ç¼“å­˜æ€æƒ³**: ä»£ç å¦‚ä¸‹ ğŸ‘‡, é—®äº†è¦ä¸è¦å¤„ç† function å’Œ Symbol, é¢è¯•å®˜è¯´æ—¢ç„¶ä½ è¯´äº†è¯´æ˜ä½ æ˜¯æ‡‚çš„, å°±ä¸å†™äº†

   ```ts
   // è¿™ä¸€ç‰ˆæ˜¯é”™çš„, å¾ªç¯å¼•ç”¨å¤„ç†çš„ä¸å¯¹, ä½†æ˜¯é¢è¯•å®˜å¥½åƒæ²¡çœ‹å‡ºæ¥(((
   function deepClone(object: any) {
     if (typeof object !== "object" || !object) {
       return object;
     }

     const objectMap = new WeakMap<object, object>();

     function clone(o: any) {
       if (typeof o !== "object" || !o) {
         return o;
       }
       if (objectMap.has(o)) return objectMap.get(o);

       const newObject = {};

       for (const key in o) {
         const newVal = clone(o[key]);
         objectMap.set(o[key], newVal);
         newObject[key] = newVal;
       }

       return newObject;
     }

     return clone(object);
   }

   // è¿™ä¸ªæ‰æ˜¯å¯¹çš„
   function deepClone2(object: any) {
     if (typeof object !== "object" || !object) {
       return object;
     }

     const objectMap = new WeakMap<object, object>();
     const returnObj = {};
     objectMap.set(object, returnObj);

     function clone(o: any) {
       if (typeof o !== "object" || !o) {
         return o;
       }

       if (objectMap.has(o)) return objectMap.get(o);

       const newObject = {};
       objectMap.set(o, newObject);

       for (const key in o) {
         newObject[key] = clone(o[key]);
       }

       return newObject;
     }

     return clone(object);
   }
   ```

5. **äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦**: ä»£ç å¦‚ä¸‹ ğŸ‘‡

   ```ts
   type Tree = {
     val: number;
     left: Tree;
     right: Tree;
   } | null;

   function maxDepth(root: Tree): number {
     if (!root) return 0;

     const leftDepth = maxDepth(root.left);
     const rightDepth = maxDepth(root.right);

     return Math.max(leftDepth, rightDepth) + 1;
   }
   ```

6. **è®²è®² react fiber æ¶æ„**: å·®ä¸å¤šè®²å‡ºæ¥äº†
7. **æ‰‹å†™ä¸€ä¸‹ fiber ä¸­çš„æ—¶é—´è°ƒåº¦æ–¹æ³•**: ä¼ªä»£ç å¦‚ä¸‹ ğŸ‘‡

   ```ts
   const tasks = [];

   function call(timeleft = 16) {
     if (timeleft <= 0) {
       // ...
       return setTimeout(call, 0);
     }
     const start = Date.now();
     tasks.shift()();
     const end = Date.now();

     call(timeleft - (end - start));
   }
   ```

8. **è®²è®² koa çš„æ´‹è‘±æ¶æ„**: è®²å‡ºæ¥äº†, è™½ç„¶è¯­è¨€ç»„ç»‡æ¯”è¾ƒæ··ä¹±(

## äºŒé¢

1. è®²äº†å¥½ä¹…é¡¹ç›®, ä¸»è¦é—®äº†ç‹¼äººæ€é¡¹ç›®æ€ä¹ˆç¡®ä¿åŒæ­¥, æœ€åé¡ºç€æŒ‡å¼•ç­”å‡ºæ¥äº†å¯ä»¥åœ¨åº”ç”¨å±‚å€Ÿé‰´ tcp é‚£ç§ç¡®è®¤å¸§çš„æ€æƒ³, åˆé—®äº†é¡¹ç›®é‡Œè™šæ‹Ÿæ»šåŠ¨çš„é—®é¢˜
2. æ‰‹å†™`bind`:

   ```js
   //  è¯·å®ç° Function.prototype.bind ä½¿å¾—ä»¥ä¸‹ä»£ç è¾“å‡º success
   function Animal(name, color) {
     this.name = name;
     this.color = color;
   }

   Animal.prototype.say = function () {
     return `I'm a ${this.color} ${this.name}`;
   };

   /**** å®ç°åœ¨è¿™é‡Œ *****/
   // è¿™æ˜¯æˆ‘ä¸€å¼€å§‹å†™çš„, æœ‰é—®é¢˜, é¢è¯•å®˜æ²¡çœ‹å‡ºæ¥è¿˜è¯´æ˜¯å¯¹çš„qwq
   Function.prototype.bind = function (thisArg, ...params) {
     const returnFn = (...newParams) =>
       this.call(thisArg, ...params, ...newParams);
     returnFn.prototype = new this();
     // returnFn.prototype = { constructor: this };
     return returnFn;
   };

   // æ”¹è¿›ç‰ˆ, æ— æ•Œ!
   Function.prototype.mybind = function (thisArg, ...params) {
     const self = this;
     const returnFn = function (...newParams) {
       return self.call(
         this instanceof self ? this : thisArg,
         ...params,
         ...newParams
       );
     };
     returnFn.prototype = this.prototype;
     return returnFn;
   };

   const Cat = Animal.mybind(null, "cat");
   const cat = new Cat("white");

   if (
     cat.say() === "I'm a white cat" &&
     cat instanceof Cat &&
     cat instanceof Animal
   ) {
     console.log("success");
   }
   ```

3. ç®—æ³•é¢˜:

   ```ts
   /**
    * è¯·ç”¨ç®—æ³•å®ç°ï¼Œä»ç»™å®šçš„æ— åºã€ä¸é‡å¤çš„æ•°ç»„dataä¸­ï¼Œå–å‡ºnä¸ªæ•°ï¼Œä½¿å…¶ç›¸åŠ å’Œä¸ºsum
    * 1. æ•°æ®æœ‰æ­£æœ‰è´Ÿ
    * 2. æ•°æ®ä¸å¯é‡å¤ä½¿ç”¨
    */
   function findSum(data: number[], n: number, sum: number) {
     function _findSum(
       restNum: number[],
       restN: number,
       restSum: number,
       usedNum: number[]
     ) {
       if (restN === 0 || restNum.length === 0) return null;
       const [curNum, ...numLeft] = restNum;
       if (curNum === restSum && n === 1) return [...usedNum, curNum];
       else {
         return (
           _findSum(numLeft, restN - 1, restSum - curNum, [
             ...usedNum,
             curNum,
           ]) || _findSum(numLeft, restN, restSum, usedNum)
         );
       }
     }

     return _findSum(data, n, sum, []);
   }
   ```
